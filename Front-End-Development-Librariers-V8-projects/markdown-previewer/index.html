<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Markdown Previewer</title>

  <!-- Main styles -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Font Awesome for toolbar icons -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />
</head>
<body>
  <!-- React will render the app into this container -->
  <div id="root"></div>

  <!-- freeCodeCamp Test Suite -->
  <script src="https://cdn.freecodecamp.org/testable-projects-fcc/v1/bundle.js"></script>

  <!-- marked for Markdown parsing -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- React + ReactDOM (UMD builds) -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

  <!-- Babel so we can use JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Your React code written in JSX -->
  <script type="text/babel">
    const { useState } = React;

    // Configure marked to treat single line breaks as <br>
    marked.setOptions({
      breaks: true,
    });

    const App = () => {
      const [expanded, setExpanded] = useState(null);
      const [markdown, setMarkdown] = useState(`# Markdown – The Simple Markup Language

## What is Markdown?

[Markdown](https://daringfireball.net/projects/markdown/) is a lightweight markup language used to format plain text. It's commonly used in documentation, README files, blogs, and note-taking apps.

---

**Key Markdown Features:**

- **Bold text** is written using \`**double asterisks**\`.
- *Italic text* is done with \`*single asterisks*\`.
- \`Inline code\` is placed between backticks like \\\`this\\\`.
- Code blocks use triple backticks:

\`\`\`
function greet(name) {
  return \`Hello, \${name}!\`;
}
\`\`\`

> **Blockquote:** Use this to highlight quotes or important notes.

### Common Markdown Elements

- Headings (\`#\`, \`##\`, \`###\`, etc.)
- Links like \`[text](url)\`
- Images like \`![alt text](image-url)\`
- Lists: \`-\`, \`*\`, or \`1.\`
- Inline and block-level code
- Blockquotes with \`>\`
- Bold and italic text with \`**\`, \`*\`, or \`_\`

---

![Markdown Logo](https://markdown-here.com/img/icon256.png)

> Try Markdown yourself – it's clean, simple, and powerful!
`);

      let editorWrap = "editorWrap";
      let previewWrap = "previewWrap";

      let editorIcon = "fa-expand";
      let previewIcon = "fa-expand";

      // Decide which panel is expanded (if any)
      switch (expanded) {
        case "editor":
          editorWrap += " full-height";
          previewWrap += " hidden";
          editorIcon = "fa-compress";
          break;

        case "preview":
          previewWrap += " full-height";
          editorWrap += " hidden";
          previewIcon = "fa-compress";
          break;

        default:
          // Default: split view
          break;
      }

      return (
        <>
          {/* Editor Panel */}
          <div className={editorWrap}>
            <div className="toolbar">
              Editor
              <i
                className={`fas ${editorIcon} expand-icon`}
                onClick={() =>
                  setExpanded(expanded === "editor" ? null : "editor")
                }
              />
            </div>

            <textarea
              id="editor"
              value={markdown}
              onChange={(e) => setMarkdown(e.target.value)}
            />
          </div>

          {/* Preview Panel */}
          <div className={previewWrap}>
            <div className="toolbar">
              Preview
              <i
                className={`fas ${previewIcon} expand-icon`}
                onClick={() =>
                  setExpanded(expanded === "preview" ? null : "preview")
                }
              />
            </div>

            <div
              id="preview"
              dangerouslySetInnerHTML={{ __html: marked.parse(markdown) }}
            />
          </div>
        </>
      );
    };

    const container = document.getElementById("root");
    const root = ReactDOM.createRoot(container);
    root.render(<App />);
  </script>
</body>
</html>
